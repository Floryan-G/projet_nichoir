<!DOCTYPE html>
<html>
<head>
    <title>Galerie Nichoir</title>

    <style>
        /* Style simple pour une galerie propre */
        body { font-family: Arial; background:#fafafa; }
        .gallery { display:flex; flex-wrap:wrap; gap:15px; }
        .item { width:250px; border:1px solid #ccc; padding:10px; background:white; }
        .item img { width:100%; height:auto; }
        .info { font-size:14px; margin-top:5px; }
    </style>
</head>

<body>
    <h1>Galerie du Nichoir Connecté</h1>

    <div class="gallery">

        {# Boucle sur chaque donnée envoyée par Flask #}
        {% for row in donnees %}
            <div class="item">

                {% if row.chemin_photo %}
                    <!-- Si une photo existe -->
                    <a href="/detail/{{ row.id }}">
                        <!-- On n'affiche que le nom du fichier -->
                        <img src="/photo/{{ row.chemin_photo.split('/')[-1] }}">
                    </a>
                {% else %}
                    <!-- Si pas de photo (standby) -->
                    <div style="height:180px; display:flex; align-items:center; justify-content:center;">
                        <i>Pas de photo</i>
                    </div>
                {% endif %}

                <!-- Infos associées -->
                <div class="info">
                    <b>Date :</b> {{ row.date_heure }} <br>
                    <b>Batterie :</b> {{ row.niveau_batterie }} V<br>
                    <b>Appareil :</b> {{ row.emplacement }}
                </div>

            </div>
        {% endfor %}

    </div>
</body>
</html>
